# Workflow triggered when a PR is closed - saves PR info for cleanup workflow
# This uses pull_request (not pull_request_target) so it's secure
name: PR closed

on:
  pull_request:
    types: [closed]

jobs:
  save_pr_info:
    runs-on: ubuntu-24.04

    steps:
      - name: Save PR info for cleanup
        run: |
          echo "${{ github.event.pull_request.number }}" > pr_number.txt
          echo "${{ github.event.pull_request.merged }}" > pr_merged.txt
          echo "PR #${{ github.event.pull_request.number }} closed (merged: ${{ github.event.pull_request.merged }})"

      - name: Upload PR info artifact
        uses: actions/upload-artifact@v4
        with:
          name: pr-closed-info
          path: |
            pr_number.txt
            pr_merged.txt
          retention-days: 1
